<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script type="text/javascript">
window.onload = function(){
	document.querySelector("#btnOk").onclick = chkFunc;
}
function chkFunc(){
	//alert('a');
	if(frm.content.value === ""){
		alert('댓글을 작성해주세요');
		return;
	}
	frm.submit();
}
function reply(){
	document.querySelector("#reply").style.display="block";
}
</script>
</head>
<body style="margin: 20px">
<h2>* {{data_one.id}}번 게시글 내용 *</h2>
<table class="table">
  <tr style="width: 95%">
  	<td style="text-align: right; width: 95%">
  		<a href="/board/reply?id={{data_one.id}}">답글</a>
  		{% if request.session.m_id == data_one.bt_id %}
  		<a href="/board/delete?id={{data_one.id}}">삭제</a>
  		{% endif %}
  		<a href="/board/list?page={{page}}">목록</a>
  	</td>
  </tr>
</table>

<table class="table">
  <tr style="width: 95%;background-color: lightgray">
  	<td>
  	작성자 : {{data_one.bt_id}}
  	</td>
  	<td>작성일 : {{data_one.reg_date.year}}.{{data_one.reg_date.month}}.{{data_one.reg_date.day}}</td>
  	<td>조회수 : {{data_one.readcnt}}</td>
  </tr>
  <tr>
  	<td colspan="3">제목 : {{data_one.title}}
  </tr>
  <tr>
  	<td colspan="3">
  		<textarea rows="5" style="width: 99%" readonly="readonly">{{data_one.content}}</textarea>
  	</td>
  </tr>
</table>

** 댓글 입력 **<p/>
<form action="/board/commentinsert?id={{data_one.id}}&page={{page}}" name="frm" method="post">{% csrf_token %} 
<table style="width: 95%" class="table">
  <tr>
  	<td>작성자:</td>
  	<td><input type="text" name="user" value="{{ request.session.m_id }}" disabled/></td>
  	<td><input type="hidden" name="user" value="{{ request.session.m_id }}"/></td>
  </tr>
  <tr>
  	<td>댓글내용:</td>
  	<td>
  		<textarea rows="5" style="width: 99%" name="content"></textarea>
  	</td>
  </tr>
  <tr>
  	<td colspan="2" style="text-align: center;">
  		<input type="button" value="등록" id="btnOk" class="btn btn-primary">
  	</td>
  </tr>
</table>

<p>** 댓글 **</p>

<table class="table">
	{% if comment_one %}
		{% for c in comment_one %}
			{% if c.post_id == data_one.id %}
				<tr style="width: 95%; background-color: lightgray;">
					<td>
				  		작성자 : {{c.user_id}}
				  	</td>
				  	<td>작성일 : {{c.reg_date.year}}.{{c.reg_date.month}}.{{c.reg_date.day}}</td>
				  	{% if request.session.m_id == c.user_id %}
				  		<td><a href="/board/commentdelete?id={{data_one.id}}&page={{page}}&comment_id={{c.id}}">삭제</a></td>
				  	{% endif %}
				</tr>
				<tr>
				  	<td colspan="3">
				  		<textarea rows="5" style="width: 99%" readonly="readonly">{{c.content}}</textarea>
				  	</td>
				</tr>
			{% endif %}
		{% endfor %}
	{% else %}
    	<tr>
  			<td colspan="5">댓글이 없어요</td>
    	</tr>
    {% endif %}
</table>

</body>
</html>

